<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor Sol - Sunny Tech</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>

    <header class="app-header">
        <div class="header-brand">
            <img src="logo.jpg" alt="Sunny Tech Solutions Logo">
        </div>
        <div class="header-app-info">
            <h2>Gestor Sol</h2>
            <span>Versão 1.0.0</span>
        </div>
    </header>

    <nav class="tab-nav" role="tablist" aria-label="Navegação Principal">
        <button class="tab-button active" id="tab-produtores" data-tab="painel-produtores" 
                role="tab" aria-selected="true" aria-controls="painel-produtores">
            Produtores
        </button>
        <button class="tab-button" id="tab-servicos" data-tab="painel-servicos" 
                role="tab" aria-selected="false" aria-controls="painel-servicos">
            Serviços
        </button>
        <button class="tab-button" id="tab-agendamento" data-tab="painel-agendamento" 
                role="tab" aria-selected="false" aria-controls="painel-agendamento">
            Agendamento
        </button>
        <button class="tab-button" id="tab-historico" data-tab="painel-historico" 
                role="tab" aria-selected="false" aria-controls="painel-historico">
            Histórico
        </button>
        <button class="tab-button" id="tab-pagamentos" data-tab="painel-pagamentos" 
                role="tab" aria-selected="false" aria-controls="painel-pagamentos">
            Pagamentos
        </button>
        <button class="tab-button" id="tab-relatorios" data-tab="painel-relatorios" 
                role="tab" aria-selected="false" aria-controls="painel-relatorios">
            Relatórios
        </button>
        <button class="tab-button" id="tab-admin" data-tab="painel-admin" 
                role="tab" aria-selected="false" aria-controls="painel-admin">
            Admin
        </button>
    </nav>

    <main class="tab-content">

        <section id="painel-produtores" class="tab-pane active" 
                 role="tabpanel" aria-labelledby="tab-produtores">
            
            <div class="page-layout">
                <div class="coluna-formulario">
                    <h2>Cadastro de Produtores</h2>
                    <form id="produtor-form">
                        <input type="hidden" id="produtor-id">
                        <div>
                            <label for="produtor-nome">Nome (*):</label>
                            <input type="text" id="produtor-nome" required>
                        </div>
                        <div>
                            <label for="produtor-apelido">Apelido:</label>
                            <input type="text" id="produtor-apelido">
                        </div>
                        <div>
                            <label for="produtor-cpf">CPF:</label>
                            <input type="text" id="produtor-cpf">
                        </div>
                        <div>
                            <label for="produtor-regiao">Região:</label>
                            <input type="text" id="produtor-regiao">
                        </div>
                        <div>
                            <label for="produtor-referencia">Referência:</label>
                            <input type="text" id="produtor-referencia">
                        </div>
                        <div>
                            <label for="produtor-telefone">Telefone:</label>
                            <input type="text" id="produtor-telefone">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Salvar Produtor</button>
                            <button type="button" id="produtor-btn-limpar" class="btn-secondary">Limpar</button>
                        </div>
                    </form>
                </div>
                <div class="coluna-lista">
                    <h3>Produtores Cadastrados</h3>
                    
                    <div class="search-controls">
                        <input type="text" id="produtor-search-input" placeholder="Buscar por Nome, Apelido ou CPF...">
                        <button id="produtor-btn-search" class="btn-secondary">Buscar</button>
                        <button id="produtor-btn-clear" class="btn-secondary">Limpar</button>
                    </div>

                    <ul id="lista-produtores">
                        <li>Carregando...</li>
                    </ul>
                    
                    <div class="pagination-controls" id="produtor-pagination">
                        <span class="pagination-info" id="produtor-pagination-info">Página 1 de 1</span>
                        <div class="pagination-buttons">
                            <button id="produtor-btn-anterior" class="btn-secondary" disabled>Anterior</button>
                            <button id="produtor-btn-proximo" class="btn-secondary" disabled>Próximo</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="painel-servicos" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-servicos">
            
            <div class="page-layout">
                <div class="coluna-formulario">
                    <h2>Cadastro de Serviços</h2>
                    <form id="servico-form">
                        <input type="hidden" id="servico-id">
                        <div>
                            <label for="servico-nome">Nome (*):</label>
                            <input type="text" id="servico-nome" required>
                        </div>
                        <div>
                            <label for="servico-valor">Valor Unit. (*):</label>
                            <input type="number" id="servico-valor" step="0.01" min="0" value="0.00" required>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Salvar Serviço</button>
                            <button type="button" id="servico-btn-limpar" class="btn-secondary">Limpar</button>
                        </div>
                    </form>
                </div>
                <div class="coluna-lista">
                    <h3>Serviços Cadastrados</h3>
                    <ul id="lista-servicos">
                        <li>Carregando...</li>
                    </ul>

                    <div class="pagination-controls" id="servico-pagination">
                        <span class="pagination-info" id="servico-pagination-info">Página 1 de 1</span>
                        <div class="pagination-buttons">
                            <button id="servico-btn-anterior" class="btn-secondary" disabled>Anterior</button>
                            <button id="servico-btn-proximo" class="btn-secondary" disabled>Próximo</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="painel-agendamento" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-agendamento">
            
            <div class="page-layout">
                <div class="coluna-formulario" style="min-width: 500px;">
                    <h2>Registro de Execução de Serviço</h2>
                    <form id="agendamento-form">
                        <input type="hidden" id="agendamento-id">
                        <div>
                            <label for="agendamento-produtor">Produtor (*):</label>
                            <select id="agendamento-produtor" required>
                                <option value="">Carregando Produtores...</option>
                            </select>
                        </div>
                        <div>
                            <label for="agendamento-servico">Serviço (*):</label>
                            <select id="agendamento-servico" required>
                                <option value="">Carregando Serviços...</option>
                            </select>
                        </div>
                        <div>
                            <label for="agendamento-data">Data (*):</label>
                            <input type="date" id="agendamento-data" required>
                        </div>
                        
                        <div class="form-row-aligned">
                            <label id="label-horas-prestadas">Horas Prestadas (*):</label>
    
                            <div class="form-group-inline" role="group" aria-labelledby="label-horas-prestadas">
                                <input type="number" id="agendamento-horas-h" min="0" value="0">
                                <label for="agendamento-horas-h" class="label-inline-suffix">H</label>
        
                                <input type="number" id="agendamento-horas-m" min="0" max="59" step="1" value="0">
                                <label for="agendamento-horas-m" class="label-inline-suffix">Min</label>
                            </div>
                        </div>

                        <div>
                            <label for="agendamento-valor">Valor Total (R$):</label>
                            <input type="number" id="agendamento-valor" step="0.01" min="0" value="0.00">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Salvar Agendamento</button>
                            <button type="button" id="agendamento-btn-limpar" class="btn-secondary">Limpar</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="painel-historico" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-historico">
            <h2>Histórico de Execuções</h2>

            <div class="search-controls">
                <input type="text" id="historico-search-input" placeholder="Buscar por Produtor, Serviço ou Data (Ex: 31/10/2025)...">
                <button id="historico-btn-search" class="btn-secondary">Buscar</button>
                <button id="historico-btn-clear" class="btn-secondary">Limpar</button>
            </div>
            
            <ul id="lista-historico">
                <li>Carregando histórico...</li>
            </ul>

            <div class="pagination-controls" id="historico-pagination">
                <span class="pagination-info" id="historico-pagination-info">Página 1 de 1</span>
                <div class="pagination-buttons">
                    <button id="historico-btn-anterior" class="btn-secondary" disabled>Anterior</button>
                    <button id="historico-btn-proximo" class="btn-secondary" disabled>Próximo</button>
                </div>
            </div>
        </section>

        <section id="painel-pagamentos" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-pagamentos">
            
            <div id="pagamentos-coluna-selecao">
                <h2>Seleção de Agendamento</h2>
                
                <div>
                    <label for="pagamentos-select-execucao">Agendamento:</label>
                    <select id="pagamentos-select-execucao">
                        <option value="">Selecione um Agendamento...</option>
                    </select>
                </div>

                <div id="pagamentos-detalhes-execucao" style="display: none; margin-top: 20px;">
                    <h3>Detalhes do Agendamento</h3>
                    <p><strong>Produtor:</strong> <span id="detalhe-produtor-nome"></span></p>
                    <p><strong>Serviço:</strong> <span id="detalhe-servico-nome"></span></p>
                    <p><strong>Data:</strong> <span id="detalhe-data"></span></p>
                    <p><strong>Valor Total:</strong> R$ <span id="detalhe-valor-total"></span></p>
                    <p><strong>Total Pago:</strong> R$ <span id="detalhe-total-pago"></span></p>
                    
                    <div class="saldo-devedor-box">
                        <span>Saldo Devedor:</span>
                        <span>R$ <span id="detalhe-saldo-devedor">0.00</span></span>
                    </div>
                </div>

                 <div id="agendamentos-pagos-container" style="margin-top: 30px;">
                    <h3>Agendamentos 100% Pagos</h3>
                    <ul id="lista-agendamentos-pagos">
                        <li>Nenhum agendamento pago encontrado.</li>
                    </ul>
                </div>
            </div>

            <div id="pagamentos-coluna-detalhes">
                <div id="pagamento-form-placeholder">
                    <p>Selecione um agendamento na coluna ao lado para iniciar.</p>
                </div>
                
                <form id="pagamento-form" style="display: none;">
                    
                    <h3 id="pagamento-form-title">Novo Pagamento</h3>
                    
                    <input type="hidden" id="pagamento-id">
                    <input type="hidden" id="pagamento-execucao-id">
                    <div>
                        <label for="pagamento-valor">Valor Pago (*):</label>
                        <input type="number" id="pagamento-valor" step="0.01" min="0.01" required>
                    </div>
                    <div>
                        <label for="pagamento-data">Data (*):</label>
                        <input type="date" id="pagamento-data" required>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn-primary" id="pagamento-btn-salvar">Salvar Pagamento</button>
                        <button type="button" id="pagamento-btn-limpar" class="btn-secondary">Limpar</button>
                        <button type="button" id="pagamento-btn-cancelar" style="display: none;" class="btn-secondary">Cancelar Edição</button>
                    </div>
                </form>
                
                <div id="pagamento-historico-container" style="display: none; margin-top: 30px;">
                    <h3>Pagamentos Registrados</h3>
                    <ul id="lista-pagamentos">
                        <li>Selecione um agendamento para ver os pagamentos.</li>
                    </ul>
                </div>
            </div>
        </section>

    <section id="painel-relatorios" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-relatorios">
            
            <h2>Relatório de Dívidas por Produtor</h2>

            <div id="relatorio-header">
                <label for="relatorio-select-produtor">Selecione o Produtor:</label>
                <select id="relatorio-select-produtor">
                    <option value="">Carregando...</option>
                </select>
            </div>

            <div id="relatorio-container">
                <h3>Dívidas Pendentes</h3>
                <ul id="lista-relatorio-dividas">
                    <li>Selecione um produtor acima.</li>
                </ul>
            </div>
            
        </section>

        <section id="painel-admin" class="tab-pane" 
                 role="tabpanel" aria-labelledby="tab-admin">
            
            <div class="page-layout">
                <div class="coluna-formulario">
                    <h2>Ações Administrativas</h2>
                    
                    <h3>Backup e Restauração</h3>
                    <p>Crie um novo backup manual ou restaure o banco a partir de um ponto salvo.</p>
                    <div class="form-buttons">
                        <button type="button" id="admin-btn-backup-manual" class="btn-primary">Criar Backup Manual Agora</button>
                    </div>

                    <h3 style="margin-top: 30px;">Itens Excluídos (Soft Delete)</h3>
                    <p>Recupere itens que foram excluídos acidentalmente.</p>
                    <div class="form-buttons">
                        <button type="button" id="admin-btn-ver-produtores" class="btn-secondary">Ver Produtores Excluídos</button>
                        <button type="button" id="admin-btn-ver-servicos" class="btn-secondary">Ver Serviços Excluídos</button>
                    </div>

                    <h3 style="margin-top: 30px;">Importação de Dados (Excel .xlsx)</h3>
                    <p style="color: var(--color-danger); font-weight: bold;">
                        ATENÇÃO: Siga a ordem exata de importação (1 > 2 > 3 > 4).
                    </p>

                    <div class="form-buttons" style="align-items: center; padding-top: 5px; border-top: 1px solid var(--color-light-border); margin-top: 15px;">
                        <label for="admin-import-file-produtores" style="margin-bottom: 0;">1. Produtores:</label>
                        <input type="file" id="admin-import-file-produtores" accept=".xlsx, .xls" style="flex-grow: 1;">
                        <button type="button" id="admin-btn-importar-produtores" class="btn-primary">Importar</button>
                    </div>

                    <div class="form-buttons" style="align-items: center; padding-top: 5px;">
                        <label for="admin-import-file-servicos" style="margin-bottom: 0;">2. Serviços:</label>
                        <input type="file" id="admin-import-file-servicos" accept=".xlsx, .xls" style="flex-grow: 1;">
                        <button type="button" id="admin-btn-importar-servicos" class="btn-primary">Importar</button>
                    </div>

                    <div class="form-buttons" style="align-items: center; padding-top: 5px; border-top: 1px solid var(--color-light-border); margin-top: 15px;">
                        <label for="admin-import-file-execucoes" style="margin-bottom: 0;">3. Execuções:</label>
                        <input type="file" id="admin-import-file-execucoes" accept=".xlsx, .xls" style="flex-grow: 1;">
                        <button type="button" id="admin-btn-importar-execucoes" class="btn-primary">Importar</button>
                    </div>

                    <div class="form-buttons" style="align-items: center; padding-top: 5px;">
                        <label for="admin-import-file-pagamentos" style="margin-bottom: 0;">4. Pagamentos:</label>
                        <input type="file" id="admin-import-file-pagamentos" accept=".xlsx, .xls" style="flex-grow: 1;">
                        <button type="button" id="admin-btn-importar-pagamentos" class="btn-primary">Importar</button>
                    </div>

                </div>

                <div class="coluna-lista">
                    <h3>Backups Salvos</h3>
                    <ul id="lista-backups">
                        <li>Carregando backups...</li>
                    </ul>

                    <h3 style="margin-top: 30px;">Itens Excluídos</h3>
                    <ul id="lista-itens-excluidos">
                        <li>Selecione uma categoria ao lado.</li>
                    </ul>
                </div>
            </div>

        </section>

    </main>

    <script type="module" src="./renderer.js"></script>

</body>
</html>